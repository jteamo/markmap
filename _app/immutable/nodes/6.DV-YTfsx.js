import{s as D,b,a as H,f as P,l as S,m as v,d as F,o as E}from"../chunks/scheduler.CzL0JPbh.js";import{S as R,i as q,b as k,c as $,a as h,m as C,t as M,d as T,e as L}from"../chunks/index.CZ9WbNVy.js";import{T as O}from"../chunks/toolbar.DwX_qM_g.js";import{M as U}from"../chunks/markmap.Cmb1wKJ_.js";import{i as V,g as j}from"../chunks/common.C1_fZTma.js";function z(t){let o,i,l,m,f,a,s;function d(e){t[5](e)}function c(e){t[6](e)}function _(e){t[7](e)}let u={class:"w-screen h-screen",fit:t[3],content:t[2],onReload:G,onOpenLink:I};return t[0]!==void 0&&(u.mm=t[0]),t[1]!==void 0&&(u.el=t[1]),t[4]!==void 0&&(u.setCursor=t[4]),o=new U({props:u}),b.push(()=>k(o,"mm",d)),b.push(()=>k(o,"el",c)),b.push(()=>k(o,"setCursor",_)),a=new O({props:{class:"absolute right-0 bottom-0 mr-2 mb-2",mm:t[0],onFullPageView:B}}),{c(){$(o.$$.fragment),f=H(),$(a.$$.fragment)},l(e){h(o.$$.fragment,e),f=P(e),h(a.$$.fragment,e)},m(e,n){C(o,e,n),S(e,f,n),C(a,e,n),s=!0},p(e,[n]){const r={};n&8&&(r.fit=e[3]),n&4&&(r.content=e[2]),!i&&n&1&&(i=!0,r.mm=e[0],v(()=>i=!1)),!l&&n&2&&(l=!0,r.el=e[1],v(()=>l=!1)),!m&&n&16&&(m=!0,r.setCursor=e[4],v(()=>m=!1)),o.$set(r);const g={};n&1&&(g.mm=e[0]),a.$set(g)},i(e){s||(M(o.$$.fragment,e),M(a.$$.fragment,e),s=!0)},o(e){T(o.$$.fragment,e),T(a.$$.fragment,e),s=!1},d(e){e&&F(f),L(o,e),L(a,e)}}}function p(t,o){parent.postMessage({type:t,data:o},window.location.origin)}function A(){p("getData")}function B(){p("goToFullPage")}function G(){window.location.reload()}function I(t){const o=new URL(t,window.top.location.href);return o.origin===window.location.origin?p("navigate",t):window.open(o,"_blank"),!1}function J(t,o,i){let l,m,f="",a=!0,s;const d={setData(n){i(2,f=n)},setCursor(n){s==null||s(n)},setFit(n){i(3,a=n)},downloadSvg(){if(!m)return;const n=m.outerHTML.replace(/<br>/g,"<br/>");p("downloadSvg",n)},downloadHtml(){const n=j();if(!n)return;const r=n.transform(f);p("downloadHtml",{result:r})},updateTheme(n){V.set(n)}};function c(n){const{type:r,data:g}=n.data,w=d[r];w==null||w(g)}E(()=>(window.addEventListener("message",c),A(),()=>{window.removeEventListener("message",c)}));function _(n){l=n,i(0,l)}function u(n){m=n,i(1,m)}function e(n){s=n,i(4,s)}return[l,m,f,a,s,_,u,e]}class Y extends R{constructor(o){super(),q(this,o,J,z,D,{})}}export{Y as component};
